<!DOCTYPE html>
<html lang="default">

<!-- Head tag -->
<head>

    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <!--Description-->

    

    
        <meta name="description" content="1、DispatcherServlet的加载自动配置类会根据是否是web项目判断要不要引入DispatcherServlet12345678910@AutoConfigureOrder(-2147483648)@Configuration@ConditionalOnWebApplication@Co"/>
    

    <!--Author-->
    
        <meta name="author" content="小远"/>
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="SpringMVC源码"/>
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="1、DispatcherServlet的加载自动配置类会根据是否是web项目判断要不要引入DispatcherServlet12345678910@AutoConfigureOrder(-2147483648)@Configuration@ConditionalOnWebApplication@Co"/>
    

    <!--Open Graph Site Name-->
        <meta property="og:site_name" content="Hexo"/>

    <!--Type page-->
    
        <meta property="og:type" content="article"/>
    

    <!--Page Cover-->
    
    
        <meta property="og:image" content="http://yoursite.com/img/home-bg.jpg"/>
    

        <meta name="twitter:card" content="summary_large_image"/>

    

    
        <meta name="twitter:image" content="http://yoursite.com/img/home-bg.jpg"/>
    

    <!-- Title -->
    
    <title>SpringMVC源码 - Hexo</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"/>
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"/>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet"/>

    <!-- Google Analytics -->
    


    <!-- favicon -->
    

</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Hexo</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories">
                            
                                Categories
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives">
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags">
                            
                                Tags
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="https://github.com/klugjo/hexo-theme-clean-blog">
                            
                                <i class="fa fa-github fa-stack-2x"></i>
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('/img/home-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>SpringMVC源码</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        
                            2020-01-16
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           
                <div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags">
                    
                        

<a href="/categories/spring/">spring</a>

                    
                </div>
                <div class="col-lg-4 col-md-5 post-categories">
                    
                </div>
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <h3 id="1、DispatcherServlet的加载"><a href="#1、DispatcherServlet的加载" class="headerlink" title="1、DispatcherServlet的加载"></a>1、DispatcherServlet的加载</h3><p>自动配置类会根据是否是web项目判断要不要引入DispatcherServlet<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@AutoConfigureOrder(-2147483648)</span><br><span class="line">@Configuration</span><br><span class="line">@ConditionalOnWebApplication</span><br><span class="line">@ConditionalOnClass(&#123;DispatcherServlet.class&#125;)</span><br><span class="line">@AutoConfigureAfter(&#123;EmbeddedServletContainerAutoConfiguration.class&#125;)</span><br><span class="line">public class DispatcherServletAutoConfiguration &#123;</span><br><span class="line">	...省略部分</span><br><span class="line">&#125;</span><br><span class="line">``` </span><br><span class="line">在容器刷新上下文的时候EmbeddedWebApplicationContext的onRefresh方法会将DispatcherServlet注入到spring容器中</span><br></pre></td></tr></table></figure></p>
<pre><code>protected void onRefresh() {
    super.onRefresh();

    try {
        this.createEmbeddedServletContainer();
    } catch (Throwable var2) {
        throw new ApplicationContextException(&quot;Unable to start embedded container&quot;, var2);
    }
}
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">    private void createEmbeddedServletContainer() &#123;</span><br><span class="line">        EmbeddedServletContainer localContainer = this.embeddedServletContainer;</span><br><span class="line">		//包装后的ApplicationContextFacade里面包含ApplicationContext,该类是tomcat的Servlet容器类并非spring容器</span><br><span class="line">		//ApplicationContext中维护了一个StandardContext</span><br><span class="line">		ServletContext localServletContext = this.getServletContext();</span><br><span class="line">        if (localContainer == null &amp;&amp; localServletContext == null) &#123;</span><br><span class="line">            EmbeddedServletContainerFactory containerFactory = this.getEmbeddedServletContainerFactory();</span><br><span class="line">            this.embeddedServletContainer = containerFactory.getEmbeddedServletContainer(new ServletContextInitializer[]&#123;this.getSelfInitializer()&#125;);</span><br><span class="line">        &#125; else if (localServletContext != null) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">				//使用初始化器初始化Filter和Servlet</span><br><span class="line">                this.getSelfInitializer().onStartup(localServletContext);</span><br><span class="line">            &#125; catch (ServletException var4) &#123;</span><br><span class="line">                throw new ApplicationContextException(&quot;Cannot initialize servlet context&quot;, var4);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        this.initPropertySources();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>FilterRegistrationBean的onStartup方法添加Filter<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> public void onStartup(ServletContext servletContext) throws ServletException &#123;</span><br><span class="line">     Filter filter = this.getFilter();</span><br><span class="line">     Assert.notNull(filter, &quot;Filter must not be null&quot;);</span><br><span class="line">     String name = this.getOrDeduceName(filter);</span><br><span class="line">     if (!this.isEnabled()) &#123;</span><br><span class="line">         this.logger.info(&quot;Filter &quot; + name + &quot; was not registered (disabled)&quot;);</span><br><span class="line">     &#125; else &#123;</span><br><span class="line">//将filter添加到StandardContext中</span><br><span class="line">         Dynamic added = servletContext.addFilter(name, filter);</span><br><span class="line">         if (added == null) &#123;</span><br><span class="line">             this.logger.info(&quot;Filter &quot; + name + &quot; was not registered (possibly already registered?)&quot;);</span><br><span class="line">         &#125; else &#123;</span><br><span class="line">             this.configure(added);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<p>ServletRegistrationBean的onStartup方法添加Servlet<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public void onStartup(ServletContext servletContext) throws ServletException &#123;</span><br><span class="line">       Assert.notNull(this.servlet, &quot;Servlet must not be null&quot;);</span><br><span class="line">       String name = this.getServletName();</span><br><span class="line">       if (!this.isEnabled()) &#123;</span><br><span class="line">           logger.info(&quot;Servlet &quot; + name + &quot; was not registered (disabled)&quot;);</span><br><span class="line">       &#125; else &#123;</span><br><span class="line">           logger.info(&quot;Mapping servlet: &apos;&quot; + name + &quot;&apos; to &quot; + this.urlMappings);</span><br><span class="line">		//将servlet添加到StandardContext中</span><br><span class="line">           Dynamic added = servletContext.addServlet(name, this.servlet);</span><br><span class="line">           if (added == null) &#123;</span><br><span class="line">               logger.info(&quot;Servlet &quot; + name + &quot; was not registered (possibly already registered?)&quot;);</span><br><span class="line">           &#125; else &#123;</span><br><span class="line">               this.configure(added);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<p>最终调用的是ApplicationContext的addServlet方法将servlet添加到StandardContext<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">private javax.servlet.ServletRegistration.Dynamic addServlet(String servletName, String servletClass, Servlet servlet, Map&lt;String, String&gt; initParams) throws IllegalStateException &#123;</span><br><span class="line">       if (servletName != null &amp;&amp; !servletName.equals(&quot;&quot;)) &#123;</span><br><span class="line">           if (!this.context.getState().equals(LifecycleState.STARTING_PREP)) &#123;</span><br><span class="line">               throw new IllegalStateException(sm.getString(&quot;applicationContext.addServlet.ise&quot;, new Object[]&#123;this.getContextPath()&#125;));</span><br><span class="line">           &#125; else &#123;</span><br><span class="line">               Wrapper wrapper = (Wrapper)this.context.findChild(servletName);</span><br><span class="line">               if (wrapper == null) &#123;</span><br><span class="line">				//将servlet包装成wrapper</span><br><span class="line">                   wrapper = this.context.createWrapper();</span><br><span class="line">                   wrapper.setName(servletName);</span><br><span class="line">				//添加到context容器中</span><br><span class="line">                   this.context.addChild(wrapper);</span><br><span class="line">               &#125; else if (wrapper.getName() != null &amp;&amp; wrapper.getServletClass() != null) &#123;</span><br><span class="line">                   if (!wrapper.isOverridable()) &#123;</span><br><span class="line">                       return null;</span><br><span class="line">                   &#125;</span><br><span class="line">                   wrapper.setOverridable(false);</span><br><span class="line">               &#125;</span><br><span class="line">			...省略部分</span><br><span class="line">               return registration;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125; else &#123;</span><br><span class="line">           throw new IllegalArgumentException(sm.getString(&quot;applicationContext.invalidServletName&quot;, new Object[]&#123;servletName&#125;));</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="2、请求处理过程"><a href="#2、请求处理过程" class="headerlink" title="2、请求处理过程"></a>2、请求处理过程</h3><p>首次接受请求会执行wrapper的allocate方法初始化DispatcherServlet，最终调用的是initStrategies方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">  protected void initStrategies(ApplicationContext context) &#123;</span><br><span class="line">//文件上传解析，如果请求类型是multipart将通过MultipartResolver进行文件上传解析</span><br><span class="line">      this.initMultipartResolver(context);</span><br><span class="line">//本地化解析</span><br><span class="line">      this.initLocaleResolver(context);</span><br><span class="line">//主题解析</span><br><span class="line">      this.initThemeResolver(context);</span><br><span class="line">//HandlerMapping，将请求映射到处理器</span><br><span class="line">      this.initHandlerMappings(context);</span><br><span class="line">//HandlerAdapter处理入参出参等</span><br><span class="line">      this.initHandlerAdapters(context);</span><br><span class="line">//如果执行过程中遇到异常，将交给HandlerExceptionResolver来解析  </span><br><span class="line">      this.initHandlerExceptionResolvers(context);</span><br><span class="line">//直接解析请求到视图名  </span><br><span class="line">      this.initRequestToViewNameTranslator(context);</span><br><span class="line">//通过viewResolver解析逻辑视图到具体视图实现  </span><br><span class="line">      this.initViewResolvers(context);</span><br><span class="line">//flash映射管理器 </span><br><span class="line">      this.initFlashMapManager(context);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>DispatcherServlet通过doDispatch方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception &#123;</span><br><span class="line">    HttpServletRequest processedRequest = request;</span><br><span class="line">    HandlerExecutionChain mappedHandler = null;</span><br><span class="line">    boolean multipartRequestParsed = false;</span><br><span class="line">    WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request);</span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            ModelAndView mv = null;</span><br><span class="line">            Object dispatchException = null;</span><br><span class="line"></span><br><span class="line">            try &#123;</span><br><span class="line">                processedRequest = this.checkMultipart(request);</span><br><span class="line">                multipartRequestParsed = processedRequest != request;</span><br><span class="line">	//获取HandlerMapping,用户请求一般由RequestMappingHandlerMapping处理</span><br><span class="line">                mappedHandler = this.getHandler(processedRequest);</span><br><span class="line">                if (mappedHandler == null || mappedHandler.getHandler() == null) &#123;</span><br><span class="line">                    this.noHandlerFound(processedRequest, response);</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">	//获取适配器，用户请求一般用RequestMappingHandlerAdapter处理</span><br><span class="line">                HandlerAdapter ha = this.getHandlerAdapter(mappedHandler.getHandler());</span><br><span class="line">                String method = request.getMethod();</span><br><span class="line">                boolean isGet = &quot;GET&quot;.equals(method);</span><br><span class="line">                if (isGet || &quot;HEAD&quot;.equals(method)) &#123;</span><br><span class="line">                    long lastModified = ha.getLastModified(request, mappedHandler.getHandler());</span><br><span class="line">                    if (this.logger.isDebugEnabled()) &#123;</span><br><span class="line">                        this.logger.debug(&quot;Last-Modified value for [&quot; + getRequestUri(request) + &quot;] is: &quot; + lastModified);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    if ((new ServletWebRequest(request, response)).checkNotModified(lastModified) &amp;&amp; isGet) &#123;</span><br><span class="line">                        return;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">	//执行HandlerInterceptor拦截器的preHandle方法</span><br><span class="line">                if (!mappedHandler.applyPreHandle(processedRequest, response)) &#123;</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">	//执行请求</span><br><span class="line">                mv = ha.handle(processedRequest, response, mappedHandler.getHandler());</span><br><span class="line">                if (asyncManager.isConcurrentHandlingStarted()) &#123;</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                this.applyDefaultViewName(processedRequest, mv);</span><br><span class="line">	//执行HandlerInterceptor拦截器的postHandle方法</span><br><span class="line">                mappedHandler.applyPostHandle(processedRequest, response, mv);</span><br><span class="line">            &#125; catch (Exception var20) &#123;</span><br><span class="line">                dispatchException = var20;</span><br><span class="line">            &#125; catch (Throwable var21) &#123;</span><br><span class="line">                dispatchException = new NestedServletException(&quot;Handler dispatch failed&quot;, var21);</span><br><span class="line">            &#125;</span><br><span class="line">//处理返回结果，包括处理异常、渲染页面，发出完成通知触发Interceptor的afterCompletion</span><br><span class="line">            this.processDispatchResult(processedRequest, response, mappedHandler, mv, (Exception)dispatchException);</span><br><span class="line">        &#125; catch (Exception var22) &#123;</span><br><span class="line">//执行Interceptor的afterCompletion方法</span><br><span class="line">            this.triggerAfterCompletion(processedRequest, response, mappedHandler, var22);</span><br><span class="line">        &#125; catch (Throwable var23) &#123;</span><br><span class="line">            this.triggerAfterCompletion(processedRequest, response, mappedHandler, new NestedServletException(&quot;Handler processing failed&quot;, var23));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">        if (asyncManager.isConcurrentHandlingStarted()) &#123;</span><br><span class="line">            if (mappedHandler != null) &#123;</span><br><span class="line">                mappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else if (multipartRequestParsed) &#123;</span><br><span class="line">            this.cleanupMultipart(processedRequest);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>适配器RequestMappingHandlerAdapter通过invokeHandleMethod方法完成初始化<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">private ModelAndView invokeHandleMethod(HttpServletRequest request,</span><br><span class="line">		HttpServletResponse response, HandlerMethod handlerMethod) throws Exception &#123;</span><br><span class="line"></span><br><span class="line">	ServletWebRequest webRequest = new ServletWebRequest(request, response);</span><br><span class="line">	//获取适用于当前handler的类的@InitBinder注解的方法，创建ServletRequestDataBinderFactory</span><br><span class="line">	WebDataBinderFactory binderFactory = getDataBinderFactory(handlerMethod);</span><br><span class="line">	//获取适用于当前handler的类的@ModelAttribute注解的方法，获取缓存的sessionAttributes，创建ModelFactory</span><br><span class="line">	ModelFactory modelFactory = getModelFactory(handlerMethod, binderFactory);</span><br><span class="line">	//创建ServletInvocableHandlerMethod</span><br><span class="line">	ServletInvocableHandlerMethod requestMappingMethod = createRequestMappingMethod(handlerMethod, binderFactory);</span><br><span class="line">	//ModelAndView容器</span><br><span class="line">	ModelAndViewContainer mavContainer = new ModelAndViewContainer();</span><br><span class="line">	//获取request中的FlashMap，加入mavContainer</span><br><span class="line">	mavContainer.addAllAttributes(RequestContextUtils.getInputFlashMap(request));</span><br><span class="line">	//初始化Model</span><br><span class="line">	modelFactory.initModel(webRequest, mavContainer, requestMappingMethod);</span><br><span class="line">	//请求重定向时忽略model参数</span><br><span class="line">	mavContainer.setIgnoreDefaultModelOnRedirect(this.ignoreDefaultModelOnRedirect);</span><br><span class="line">	//Servlet容器是否支持异步处理请求，返回StandardServletAsyncWebRequest或NoSupportAsyncWebRequest</span><br><span class="line">	AsyncWebRequest asyncWebRequest = WebAsyncUtils.createAsyncWebRequest(request, response);</span><br><span class="line">	asyncWebRequest.setTimeout(this.asyncRequestTimeout);</span><br><span class="line">	//获取request的asyncManager</span><br><span class="line">	final WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request);</span><br><span class="line">	//设置异步处理线程池</span><br><span class="line">	asyncManager.setTaskExecutor(this.taskExecutor);</span><br><span class="line">	//设置请求</span><br><span class="line">	asyncManager.setAsyncWebRequest(asyncWebRequest);</span><br><span class="line">	//设置拦截器</span><br><span class="line">	asyncManager.registerCallableInterceptors(this.callableInterceptors);</span><br><span class="line">	asyncManager.registerDeferredResultInterceptors(this.deferredResultInterceptors);</span><br><span class="line">	//有异步请求处理完成</span><br><span class="line">	if (asyncManager.hasConcurrentResult()) &#123;</span><br><span class="line">		//获取处理结果</span><br><span class="line">		Object result = asyncManager.getConcurrentResult();</span><br><span class="line">		//获取处理返回的mavContainer</span><br><span class="line">		mavContainer = (ModelAndViewContainer) asyncManager.getConcurrentResultContext()[0];</span><br><span class="line">		//清除ConcurrentResult与ConcurrentResultContext</span><br><span class="line">		asyncManager.clearConcurrentResult();</span><br><span class="line"></span><br><span class="line">		if (logger.isDebugEnabled()) &#123;</span><br><span class="line">			logger.debug(&quot;Found concurrent result value [&quot; + result + &quot;]&quot;);</span><br><span class="line">		&#125;</span><br><span class="line">		//创建ConcurrentResultHandlerMethod</span><br><span class="line">		requestMappingMethod = requestMappingMethod.wrapConcurrentResult(result);</span><br><span class="line">	&#125;</span><br><span class="line">	//处理请求</span><br><span class="line">	requestMappingMethod.invokeAndHandle(webRequest, mavContainer);</span><br><span class="line">	//正在异步处理请求</span><br><span class="line">	if (asyncManager.isConcurrentHandlingStarted()) &#123;</span><br><span class="line">		return null;</span><br><span class="line">	&#125;</span><br><span class="line">	//处理并返回ModelAndView</span><br><span class="line">	return getModelAndView(mavContainer, modelFactory, webRequest);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>requestMappingMethod的invokeAndHandle继续处理请求<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public void invokeAndHandle(ServletWebRequest webRequest, ModelAndViewContainer mavContainer, Object... providedArgs) throws Exception &#123;</span><br><span class="line">       //处理请求</span><br><span class="line">	Object returnValue = this.invokeForRequest(webRequest, mavContainer, providedArgs);</span><br><span class="line">       //如方法上有@ResponseStatus注解，将注解值放入request或response</span><br><span class="line">	this.setResponseStatus(webRequest);</span><br><span class="line">	//没有返回值</span><br><span class="line">       if (returnValue == null) &#123;</span><br><span class="line">           if (this.isRequestNotModified(webRequest) || this.getResponseStatus() != null || mavContainer.isRequestHandled()) &#123;</span><br><span class="line">               //设置请求已被处理完</span><br><span class="line">			mavContainer.setRequestHandled(true);</span><br><span class="line">               return;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125; else if (StringUtils.hasText(this.getResponseStatusReason())) &#123;</span><br><span class="line">           mavContainer.setRequestHandled(true);</span><br><span class="line">           return;</span><br><span class="line">       &#125;</span><br><span class="line">	</span><br><span class="line">       mavContainer.setRequestHandled(false);</span><br><span class="line">       try &#123;</span><br><span class="line">		//处理器处理返回值</span><br><span class="line">           this.returnValueHandlers.handleReturnValue(returnValue, this.getReturnValueType(returnValue), mavContainer, webRequest);</span><br><span class="line">       &#125; catch (Exception var6) &#123;</span><br><span class="line">           if (this.logger.isTraceEnabled()) &#123;</span><br><span class="line">               this.logger.trace(this.getReturnValueHandlingErrorMessage(&quot;Error handling return value&quot;, returnValue), var6);</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           throw var6;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<p>继续看invokeForRequest<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public Object invokeForRequest(NativeWebRequest request, ModelAndViewContainer mavContainer,</span><br><span class="line">		Object... providedArgs) throws Exception &#123;</span><br><span class="line">	//获取并处理方法参数，即Controller方法中的参数  </span><br><span class="line">	Object[] args = getMethodArgumentValues(request, mavContainer, providedArgs);</span><br><span class="line">	//执行Controller中的方法</span><br><span class="line">	Object returnValue = doInvoke(args);</span><br><span class="line">	if (logger.isTraceEnabled()) &#123;</span><br><span class="line">		logger.trace(&quot;Method [&quot; + getMethod().getName() + &quot;] returned [&quot; + returnValue + &quot;]&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">	return returnValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="3、RequestMappingHandlerMapping"><a href="#3、RequestMappingHandlerMapping" class="headerlink" title="3、RequestMappingHandlerMapping"></a>3、RequestMappingHandlerMapping</h3><p>RequestMappingHandlerMapping在初始话时为每个方法创建RequestMappingInfo<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">protected RequestMappingInfo getMappingForMethod(Method method, Class&lt;?&gt; handlerType) &#123;</span><br><span class="line">       //方法RequestMappingInfo</span><br><span class="line">	RequestMappingInfo info = this.createRequestMappingInfo(method);</span><br><span class="line">       if (info != null) &#123;</span><br><span class="line">		//类RequestMappingInfo</span><br><span class="line">           RequestMappingInfo typeInfo = this.createRequestMappingInfo(handlerType);</span><br><span class="line">           if (typeInfo != null) &#123;</span><br><span class="line">			//将二者组合到一起</span><br><span class="line">               info = typeInfo.combine(info);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       return info;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  private RequestMappingInfo createRequestMappingInfo(AnnotatedElement element) &#123;</span><br><span class="line">//获取RequestMapping注解中的信息</span><br><span class="line">      RequestMapping requestMapping = (RequestMapping)AnnotatedElementUtils.findMergedAnnotation(element, RequestMapping.class);</span><br><span class="line">      //获取自定义注解中的信息，该方法待子类实现</span><br><span class="line">RequestCondition&lt;?&gt; condition = element instanceof Class ? this.getCustomTypeCondition((Class)element) : this.getCustomMethodCondition((Method)element);</span><br><span class="line">//创建RequestMappingInfo</span><br><span class="line">return requestMapping != null ? this.createRequestMappingInfo(requestMapping, condition) : null;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>查找处理方法时，使用父类AbstractHandlerMethodMapping的lookupHandlerMethod方法查找url对应的处理方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">protected HandlerMethod lookupHandlerMethod(String lookupPath, HttpServletRequest request) throws Exception &#123;</span><br><span class="line">	List&lt;Match&gt; matches = new ArrayList&lt;Match&gt;();</span><br><span class="line">	//通过path直接匹配</span><br><span class="line">	List&lt;T&gt; directPathMatches = this.urlMap.get(lookupPath);</span><br><span class="line">	if (directPathMatches != null) &#123;</span><br><span class="line">		addMatchingMappings(directPathMatches, matches, request);</span><br><span class="line">	&#125;</span><br><span class="line">	if (matches.isEmpty()) &#123;</span><br><span class="line">		// No choice but to go through all mappings...</span><br><span class="line">		//通过表达式模糊匹配</span><br><span class="line">		addMatchingMappings(this.handlerMethods.keySet(), matches, request);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	if (!matches.isEmpty()) &#123;</span><br><span class="line">		//比较器</span><br><span class="line">		Comparator&lt;Match&gt; comparator = new MatchComparator(getMappingComparator(request));</span><br><span class="line">		//匹配多个时，排序</span><br><span class="line">		Collections.sort(matches, comparator);</span><br><span class="line">		if (logger.isTraceEnabled()) &#123;</span><br><span class="line">			logger.trace(&quot;Found &quot; + matches.size() + &quot; matching mapping(s) for [&quot; + lookupPath + &quot;] : &quot; + matches);</span><br><span class="line">		&#125;</span><br><span class="line">		//获取最匹配的</span><br><span class="line">		Match bestMatch = matches.get(0);</span><br><span class="line">		//多个方法匹配成功</span><br><span class="line">		if (matches.size() &gt; 1) &#123;</span><br><span class="line">			Match secondBestMatch = matches.get(1);</span><br><span class="line">			if (comparator.compare(bestMatch, secondBestMatch) == 0) &#123;</span><br><span class="line">				Method m1 = bestMatch.handlerMethod.getMethod();</span><br><span class="line">				Method m2 = secondBestMatch.handlerMethod.getMethod();</span><br><span class="line">				throw new IllegalStateException(</span><br><span class="line">						&quot;Ambiguous handler methods mapped for HTTP path &apos;&quot; + request.getRequestURL() + &quot;&apos;: &#123;&quot; +</span><br><span class="line">						m1 + &quot;, &quot; + m2 + &quot;&#125;&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		//匹配相关信息设置到request中，包括解析后的@pathvariable参数集合</span><br><span class="line">		handleMatch(bestMatch.mapping, lookupPath, request);</span><br><span class="line">		//返回最匹配的处理方法</span><br><span class="line">		return bestMatch.handlerMethod;</span><br><span class="line">	&#125;</span><br><span class="line">	else &#123;</span><br><span class="line">		return handleNoMatch(handlerMethods.keySet(), lookupPath, request);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>比较器comparator通过RequestMappingInfo的compareTo去比较是否匹配<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">public int compareTo(RequestMappingInfo other, HttpServletRequest request) &#123;</span><br><span class="line">       int result;</span><br><span class="line">	//HEAD请求先根据请求方法匹配</span><br><span class="line">       if (HttpMethod.HEAD.matches(request.getMethod())) &#123;</span><br><span class="line">           result = this.methodsCondition.compareTo(other.getMethodsCondition(), request);</span><br><span class="line">           if (result != 0) &#123;</span><br><span class="line">               return result;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">	//根据path信息比较</span><br><span class="line">       result = this.patternsCondition.compareTo(other.getPatternsCondition(), request);</span><br><span class="line">       if (result != 0) &#123;</span><br><span class="line">           return result;</span><br><span class="line">       &#125; else &#123;</span><br><span class="line">		//根据参数信息比较</span><br><span class="line">           result = this.paramsCondition.compareTo(other.getParamsCondition(), request);</span><br><span class="line">           if (result != 0) &#123;</span><br><span class="line">               return result;</span><br><span class="line">           &#125; else &#123;</span><br><span class="line">               result = this.headersCondition.compareTo(other.getHeadersCondition(), request);</span><br><span class="line">               if (result != 0) &#123;</span><br><span class="line">                   return result;</span><br><span class="line">               &#125; else &#123;</span><br><span class="line">                   result = this.consumesCondition.compareTo(other.getConsumesCondition(), request);</span><br><span class="line">                   if (result != 0) &#123;</span><br><span class="line">                       return result;</span><br><span class="line">                   &#125; else &#123;</span><br><span class="line">                       result = this.producesCondition.compareTo(other.getProducesCondition(), request);</span><br><span class="line">                       if (result != 0) &#123;</span><br><span class="line">                           return result;</span><br><span class="line">                       &#125; else &#123;</span><br><span class="line">                           result = this.methodsCondition.compareTo(other.getMethodsCondition(), request);</span><br><span class="line">                           if (result != 0) &#123;</span><br><span class="line">                               return result;</span><br><span class="line">                           &#125; else &#123;</span><br><span class="line">							//根据自定义信息比较</span><br><span class="line">                               result = this.customConditionHolder.compareTo(other.customConditionHolder, request);</span><br><span class="line">                               return result != 0 ? result : 0;</span><br><span class="line">                           &#125;</span><br><span class="line">                       &#125;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="4、RequestMappingHandlerAdapter"><a href="#4、RequestMappingHandlerAdapter" class="headerlink" title="4、RequestMappingHandlerAdapter"></a>4、RequestMappingHandlerAdapter</h3><p>适配器RequestMappingHandlerAdapter实现了InitializingBean接口，实例化后会执行afterPropertiesSet方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public void afterPropertiesSet() &#123;</span><br><span class="line">	//初始化ControllerAdvice注解的类</span><br><span class="line">       this.initControllerAdviceCache();</span><br><span class="line">       List handlers;</span><br><span class="line">	//初始化参数处理器，如RequestParamMethodArgumentResolver处理RequestParam注解的参数</span><br><span class="line">       if (this.argumentResolvers == null) &#123;</span><br><span class="line">           handlers = this.getDefaultArgumentResolvers();</span><br><span class="line">           this.argumentResolvers = (new HandlerMethodArgumentResolverComposite()).addResolvers(handlers);</span><br><span class="line">       &#125;</span><br><span class="line">	//初始化参数绑定处理器，</span><br><span class="line">       if (this.initBinderArgumentResolvers == null) &#123;</span><br><span class="line">           handlers = this.getDefaultInitBinderArgumentResolvers();</span><br><span class="line">           this.initBinderArgumentResolvers = (new HandlerMethodArgumentResolverComposite()).addResolvers(handlers);</span><br><span class="line">       &#125;</span><br><span class="line">	//初始化返回值处理器，如ResponseBodyEmitterReturnValueHandler处理ResponseBody注解的处理器</span><br><span class="line">       if (this.returnValueHandlers == null) &#123;</span><br><span class="line">           handlers = this.getDefaultReturnValueHandlers();</span><br><span class="line">           this.returnValueHandlers = (new HandlerMethodReturnValueHandlerComposite()).addHandlers(handlers);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr />

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    
                        <li>
                            <a href="https://github.com/chinamhr/chinamhr.github.io" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2020 小远<br></p>
                <p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p>
                <p class="copyright text-muted">Adapted for <a target="_blank" href="https://hexo.io/">Hexo</a> by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>